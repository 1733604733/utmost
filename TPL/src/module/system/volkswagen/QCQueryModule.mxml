<?xml version="1.0" encoding="utf-8"?>
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical" width="100%" height="100%" xmlns:controls="com.adobe.flex.extras.controls.*" xmlns:component="component.*" xmlns:code="http://code.google.com/p/flexlib/">
	<mx:Script>
		<![CDATA[
			import mx.controls.Alert;
			import mx.rpc.events.ResultEvent;
			import org.utmost.service.AutoService;
			import org.utmost.component.macpopup.controls.CocoaAlert;
			[Bindable]
			public var myDP:Array=[{name:"beijing"},{name:"changchun"},{name:"dongjing"},{name:"shanghai"},{name:"newyork"}];
			
			
			private function initData():void {
				trace("ddd");
				AutoService.getInstance().saveAll("QUOTATION",quotation,function(e:ResultEvent):void {
					Alert.show("OK");
				},null);
			}  
			
			private function search(): void {
				var hql:String="from QUOTATION where 1=1 ";
				if(fromAC.text!="") {
					hql+=" and startside='"+fromAC.text+"' ";
				}
				if(toAC.text!="") {
					hql+=" and endside='"+toAC.text+"' ";
				}
				if(forwarder.text!="") {
					hql+=" and forwarder like '%"+forwarder.text+"%' ";
				}
				
				trace("hql:"+hql);
				AutoService.getInstance().findByHql(hql,function(e:ResultEvent):void{
					if(e.result!=null) {
						var aac:ArrayCollection=e.result as ArrayCollection;
						trace("aac:"+aac);
						adg.dataProvider=aac;
						//adg.dataProvide=aac;
					}
				},null);
			}
		]]>
	</mx:Script>
	<mx:Script source="Data.as" />
	<mx:Array id="ds_shiptype">
		<mx:Object label="All" value="All" />
		<mx:Object label="Land" value="Land" />
		<mx:Object label="Sea" value="Sea" />
		<mx:Object label="Air" value="Air" />
		<mx:Object label="Railway" value="Railway" />
	</mx:Array>
	<mx:Array id="ds_datatype">
		<mx:Object label="All" value="All" />
		<mx:Object label="quotation" value="quotation" />
		<mx:Object label="contract" value="contract" />
	</mx:Array>
	<mx:Array id="ds_containertype">
		<mx:Object label="All" value="All" />
		<mx:Object label="20’ GP" value="20’ GP" />
		<mx:Object label="40’ GP" value="40’ GP" />
		<mx:Object label="40’ HQ" value="40’ HQ" />
	</mx:Array>
	<mx:Array id="ds_inputgroup">
		<mx:Object label="All" value="All" />
		<mx:Object label="VGC" value="VGC" />
		<mx:Object label="SVW" value="SVW" />
		<mx:Object label="FAW-VW" value="FAW-VW" />
		<mx:Object label="VWPF" value="VWPF" />
		<mx:Object label="VWED" value="VWED" />
		<mx:Object label="VWATD" value="VWATD" />
		<mx:Object label="VWTS" value="VWTS" />
		<mx:Object label="VWPT" value="VWPT" />
	</mx:Array>
	<mx:TabNavigator width="100%" height="80">
		<mx:VBox label="Rote Search" width="100%" height="100%">
			<mx:HBox width="100%" height="100%" horizontalAlign="left" verticalAlign="middle" horizontalGap="20" paddingLeft="20" paddingRight="20">
				<mx:Label text="Transport"/>
				<mx:ComboBox id="shiptype" dataProvider="{ds_shiptype}"></mx:ComboBox>
				<mx:Label text="from"/>
				<controls:AutoComplete id="fromAC" styleName="AutoComplete"  dataProvider="{myDP}" labelField="name"/>
				<mx:Label text="to"/>
				<controls:AutoComplete id="toAC" styleName="AutoComplete" dataProvider="{myDP}" labelField="name"/>
				<mx:Spacer width="100%"/>
				<mx:Button label="Search" click="search()"/>
			</mx:HBox>
		</mx:VBox>
		<mx:VBox width="100%" height="100%" label="Forwarder Search">
		</mx:VBox>
		<mx:VBox width="100%" height="100%" label="Keyword Search">
		</mx:VBox>
	</mx:TabNavigator>
	
	
	<mx:VBox width="100%" height="100%" verticalGap="0">
		<mx:HBox width="100%" horizontalAlign="left" verticalAlign="middle" horizontalGap="20">
			<mx:ComboBox id="datatype" prompt="Data type" dataProvider="{ds_datatype}"></mx:ComboBox>
			<code:PromptingTextInput id="forwarder" prompt="please input forwarder name."/>
			<mx:DateField id="time" yearNavigationEnabled="true"/>
			<mx:ComboBox id="shiptype2" prompt="Ship type" dataProvider="{ds_shiptype}"></mx:ComboBox>
			<mx:ComboBox id="containertype" prompt="Container type" dataProvider="{ds_containertype}"></mx:ComboBox>
			<mx:ComboBox id="inputgroup" prompt="Input Group" dataProvider="{ds_inputgroup}"></mx:ComboBox>
		</mx:HBox>
		<mx:VBox width="100%" height="100%" verticalGap="6"  horizontalScrollPolicy="off">
			<mx:AdvancedDataGrid id="adg"  horizontalScrollPolicy="on" designViewDataType="flat" width="100%" height="100%">
				<mx:columns>
					<mx:AdvancedDataGridColumn headerText="No" dataField="no"/>
					<mx:AdvancedDataGridColumn headerText="Transport" dataField="transport"/>
					<mx:AdvancedDataGridColumn headerText="Forwarder" dataField="forwarder"/>
					<mx:AdvancedDataGridColumn headerText="DataType" dataField="datatype"/>
					<mx:AdvancedDataGridColumn headerText="HarborCharges" dataField="harborcharges"/>
					<mx:AdvancedDataGridColumn headerText="TransportCharges" dataField="transportcharges"/>
					<mx:AdvancedDataGridColumn headerText="StartSide" dataField="startside"/>
					<mx:AdvancedDataGridColumn headerText="EndSide" dataField="endside"/>
					<mx:AdvancedDataGridColumn headerText="Distance" dataField="distance"/>
					<mx:AdvancedDataGridColumn headerText="Group" dataField="vgroup"/>
					
					
					<mx:AdvancedDataGridColumn headerText="QuotationTime" dataField="quotationtime"/>
					<mx:AdvancedDataGridColumn headerText="PeriodOfValidation" dataField="periodofvalidation"/>
					<mx:AdvancedDataGridColumn headerText="DeliverType" dataField="delivertype"/>
				</mx:columns>
			</mx:AdvancedDataGrid>
			<component:DGPagination verticalGap="0" id="dgp" horizontalGap="6" verticalAlign="top" pageSize="30"/>
			<mx:HBox width="100%" horizontalAlign="center" verticalAlign="middle" horizontalGap="100">
				<mx:Button label="Export" />
				<mx:Button label="Print"/>
				<!--mx:Button label="InitData"  click="initData()"/-->
			</mx:HBox>
		</mx:VBox>
	</mx:VBox>
</mx:Module>
